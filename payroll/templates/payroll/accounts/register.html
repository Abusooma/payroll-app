{% extends 'base_landing/main.html' %}
{% load static %}

{% block title %} Sign up {% endblock %}

{% block content %}
<div class="register-page">
    <div class="register-container">
        <div class="register-form">
            <h2 class="register-title animated-element" style="animation-delay: 0.1s">
                <i class="fas fa-user-plus me-2"></i>Rejoignez EasyPay
            </h2>
            <form method="post">
                {% csrf_token %}
                {% if form.non_field_errors %}
                <div class="alert alert-danger animated-element" style="animation-delay: 0.2s">
                    {% for error in form.non_field_errors %}
                    {{ error }}
                    {% endfor %}
                </div>
                {% endif %}
                <div class="form-floating mb-3 animated-element" style="animation-delay: 0.2s">
                    <input type="text" class="form-control {% if form.company_name.errors %}is-invalid{% endif %}"
                           id="companyName" name="{{ form.company_name.name }}" placeholder="Nom de la société" required
                           value="{{ form.company_name.value|default:'' }}">
                    <label for="companyName"><i class="fas fa-building me-2"></i>Nom de la société</label>
                    {% if form.company_name.errors %}
                    <div class="invalid-feedback">
                        {% for error in form.company_name.errors %}
                        {{ error }}
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                <div class="form-floating mb-3 animated-element" style="animation-delay: 0.3s">
                    <input type="email" class="form-control {% if form.email.errors %}is-invalid{% endif %}" id="email"
                           name="{{ form.email.name }}" placeholder="Email professionnel" required
                           value="{{ form.email.value|default:'' }}">
                    <label for="email"><i class="fas fa-envelope me-2"></i>Email professionnel</label>
                    {% if form.email.errors %}
                    <div class="invalid-feedback">
                        {% for error in form.email.errors %}
                        {{ error }}
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                <div class="form-floating mb-3 animated-element password-field" style="animation-delay: 0.4s">
                    <input type="password" class="form-control {% if form.password.errors %}is-invalid{% endif %}"
                           id="password" name="{{ form.password.name }}" placeholder="Mot de passe" required>
                    <label for="password"><i class="fas fa-lock me-2"></i>Mot de passe</label>
                    <button type="button" class="btn btn-link password-toggle"
                            onclick="togglePasswordVisibility('password')">
                        <i class="fas fa-eye"></i>
                    </button>
                    {% if form.password.errors %}
                    <div class="invalid-feedback">
                        {% for error in form.password.errors %}
                        {{ error }}
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                <div class="form-floating mb-4 animated-element password-field" style="animation-delay: 0.5s">
                    <input type="password"
                           class="form-control {% if form.confirm_password.errors %}is-invalid{% endif %}"
                           id="confirmPassword" name="{{ form.confirm_password.name }}"
                           placeholder="Confirmer le mot de passe" required>
                    <label for="confirmPassword"><i class="fas fa-lock me-2"></i>Confirmer le mot de passe</label>
                    <button type="button" class="btn btn-link password-toggle"
                            onclick="togglePasswordVisibility('confirmPassword')">
                        <i class="fas fa-eye"></i>
                    </button>
                    {% if form.confirm_password.errors %}
                    <div class="invalid-feedback">
                        {% for error in form.confirm_password.errors %}
                        {{ error }}
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                <button type="submit" class="btn btn-register w-100 animated-element" style="animation-delay: 0.6s">
                    <i class="fas fa-paper-plane me-2"></i>Créer mon compte
                </button>
            </form>
            <div class="login-link mt-3 text-center animated-element" style="animation-delay: 0.7s">
                Déjà un compte ?
                <a href="{% url 'sign_in' %}"><i class="fas fa-sign-in-alt me-1"></i>Se connecter</a>
            </div>
        </div>
        <div class="register-image">
            <div class="register-image-text">
                <h3 class="animated-element" style="animation-delay: 0.8s">
                    <i class="fas fa-calculator me-2"></i>Simplifiez votre gestion de paie
                </h3>
                <p class="animated-element" style="animation-delay: 0.9s">
                    Rejoignez des milliers d'entreprises qui font confiance à EasyPay pour
                    leur gestion de paie.
                </p>
                <ul class="features-list animated-element" style="animation-delay: 1s">
                    <li><i class="fas fa-check-circle"></i>Calculs automatiques précis</li>
                    <li><i class="fas fa-shield-alt"></i>Sécurité des données garantie</li>
                    <li><i class="fas fa-clock"></i>Gain de temps considérable</li>
                    <li><i class="fas fa-sync"></i>Mises à jour réglementaires automatiques</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_script %}
<script>
    function togglePasswordVisibility(inputId) {
      const input = document.getElementById(inputId);
      const icon = input.nextElementSibling.nextElementSibling.querySelector('i');

      if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      } else {
        input.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
      }
    }
</script>
{% endblock %}